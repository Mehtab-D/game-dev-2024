<body id="myBody" style="background-repeat: repeat; background-size: 80%; background-image: url('https://i.pinimg.com/736x/0a/d7/6b/0ad76b1facb2323fbc5cffe58f604b32.jpg');">
    <h1 align="center"><font color="#ffffff" style="font-size: 56px;">Final Project Level 1</font></h1>

    <script>
    // Global variables
    let carrotsCollected = 0;  /*tracks how many carrots are collected*/
    let totalCarrots = 8; 
    let myGlobalX = 0;
    let myClock;

    // Collision detection function
    function myHitOther(my1, my2) {
        let el1 = document.getElementById(my1);
        let el2 = document.getElementById(my2);

        let left1 = el1.offsetLeft;
        let top1 = el1.offsetTop;
        let width1 = el1.offsetWidth;
        let height1 = el1.offsetHeight;

        let left2 = el2.offsetLeft;
        let top2 = el2.offsetTop;
        let width2 = el2.offsetWidth;
        let height2 = el2.offsetHeight;

        // Check for collision by comparing bounding boxes
        return !(left1 + width1 < left2 || left1 > left2 + width2 || top1 + height1 < top2 || top1 > top2 + height2);
    }

    function myCheckHit() {                                            /*this is the function to check if the rabbit has hit any carrots*/
        /* Check for collisions with each carrot*/
        if (myHitOther('myImg01', 'myImg02') && document.getElementById('myImg02').style.display !== 'none') {
            document.getElementById('myImg02').style.display = 'none';  /*hides the carrot*/
            carrotsCollected++;  // Increment the carrots collected
        }   
        if (myHitOther('myImg01', 'myImg03') && document.getElementById('myImg03').style.display !== 'none') {
            document.getElementById('myImg03').style.display = 'none';  // Hide carrot
            carrotsCollected++;  // adds the carrots collected
        }   
        if (myHitOther('myImg01', 'myImg04') && document.getElementById('myImg04').style.display !== 'none') {
            document.getElementById('myImg04').style.display = 'none';  /*hides the carrot*/
            carrotsCollected++;  // adds the carrots collected
        }   
        if (myHitOther('myImg01', 'myImg05') && document.getElementById('myImg05').style.display !== 'none') {
            document.getElementById('myImg05').style.display = 'none';  /*hides the carrot*/
            carrotsCollected++;  // adds the carrots collected
        }   
        if (myHitOther('myImg01', 'myImg06') && document.getElementById('myImg06').style.display !== 'none') {
            document.getElementById('myImg06').style.display = 'none';  // Hide carrot
            carrotsCollected++;  // add the carrots collected
        }   
        if (myHitOther('myImg01', 'myImg07') && document.getElementById('myImg07').style.display !== 'none') {
            document.getElementById('myImg07').style.display = 'none';  // Hide carrot
            carrotsCollected++;  // add the carrots collected
        }   
        if (myHitOther('myImg01', 'myImg08') && document.getElementById('myImg08').style.display !== 'none') {
            document.getElementById('myImg08').style.display = 'none';  // Hide carrot
            carrotsCollected++;  // add the carrots collected
        }

        if (carrotsCollected === totalCarrots) {   /*this part checks if all the carrots are collected*/
            setTimeout(function() {
                alert('You collected all the carrots! Proceeding to the next level...');
                location.reload(); /*reload the page to start the next level*/
            }, 100);
        }
    }

    function moveCharacter(direction) {      /*function to move the rabbit*/
        let img = document.getElementById('myImg01');
        let left = parseInt(img.style.left);
        let top = parseInt(img.style.top);

        if (direction === 'left') {
            img.style.left = (left - 10) + 'px';
        } else if (direction === 'right') {
            img.style.left = (left + 10) + 'px';
        } else if (direction === 'up') {
            img.style.top = (top - 10) + 'px';
        } else if (direction === 'down') {
            img.style.top = (top + 10) + 'px';
        }

        myCheckHit();    /*this checks if the rabbit hits any of the carrots*/
    }

    // Event listener for keyboard arrow keys
    document.addEventListener('keydown', function(event) {
        switch(event.key) {
            case 'ArrowLeft':
                moveCharacter('left');
                break;
            case 'ArrowRight':
                moveCharacter('right');
                break;
            case 'ArrowUp':
                moveCharacter('up');
                break;
            case 'ArrowDown':
                moveCharacter('down');
                break;
        }
    });
    </script>

    <input type="button" value="Auto Background Left" onclick="{
        clearInterval(myClock);
        let myTemp = '100px 0px';
        myClock = setInterval(function() {
            myGlobalX -= 5;
            myTemp =  myGlobalX + 'px 0px';
            document.getElementById('myBody').style.backgroundPosition = myTemp;
        }, 100);
    }">

    <!-- Move right and down with touch and click support -->
    <input type="button" value="Right" onTouchStart="this.click(); event.preventDefault();" onclick="{
        document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) + 10 + 'px';
        myCheckHit();   
    }">

    <input type="button" value="Down" onTouchStart="this.click(); event.preventDefault();" onclick="{
        document.getElementById('myImg01').style.top = parseInt(document.getElementById('myImg01').style.top) + 10 + 'px';
        myCheckHit();   
    }"><br><br>

    <img id="myImg01" src="https://raw.githubusercontent.com/Mehtab-D/game-dev-2024/refs/heads/main/New%20Piskel%20(5).gif" style="position:absolute; width:200px; height:200px; left: 50px; top:190px;" />

    <img id="myImg02" src="https://raw.githubusercontent.com/Mehtab-D/game-dev-2024/refs/heads/main/New%20Piskel%20(7).gif" style="position:absolute; width:150px; height:150px; left:350px; top:90px; transform: rotate(-15deg);" />
    <img id="myImg03" src="https://raw.githubusercontent.com/Mehtab-D/game-dev-2024/refs/heads/main/New%20Piskel%20(7).gif" style="position:absolute; width:150px; height:150px; left:600px; top:200px; transform: rotate(15deg);" />
    <img id="myImg04" src="https://raw.githubusercontent.com/Mehtab-D/game-dev-2024/refs/heads/main/New%20Piskel%20(7).gif" style="position:absolute; width:150px; height:150px; left:1000px; top:600px; transform: rotate(-15deg);" />
    <img id="myImg05" src="https://raw.githubusercontent.com/Mehtab-D/game-dev-2024/refs/heads/main/New%20Piskel%20(7).gif" style="position:absolute; width:150px; height:150px; left: 50vw; top:20vh; transform: rotate(15deg);" />
    <img id="myImg06" src="https://raw.githubusercontent.com/Mehtab-D/game-dev-2024/refs/heads/main/New%20Piskel%20(7).gif" style="position:absolute; width:150px; height:150px; right: 200px; top: 200px; transform: rotate(-15deg);" />
    <img id="myImg07" src="https://raw.githubusercontent.com/Mehtab-D/game-dev-2024/refs/heads/main/New%20Piskel%20(7).gif" style="position:absolute; width:150px; height:150px; right: 2000px; top: 700px; transform: rotate(15deg);" />
    <img id="myImg08" src="https://raw.githubusercontent.com/Mehtab-D/game-dev-2024/refs/heads/main/New%20Piskel%20(7).gif" style="position:absolute; width:150px; height:150px; left: 1000px; top: 500px; transform: rotate(-15deg);" />

</body>
